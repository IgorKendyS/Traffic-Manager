{% extends 'base.html' %}
{% load static %}

{% block 'title' %}Métricas{% endblock %}

{% block 'head' %}
    <link rel="stylesheet" href="{% static 'metrics/css/metrics.css' %}">
{% endblock %}

{% block 'content' %}
<h1>Métricas de Anúncios</h1>

{% if current_platform == 'facebook' %}
<form method="post" action="{% url 'import_facebook_data' %}">
    {% csrf_token %}
    <button type="submit">Importar Dados do Facebook</button>
</form>
{% endif %}

<div class="btn-group mb-3" role="group" aria-label="Plataforma de Anúncios">
    <a href="?platform=google" class="btn btn-primary {% if current_platform == 'google' %}active{% endif %}">Google Ads</a>
    <a href="?platform=facebook" class="btn btn-primary {% if current_platform == 'facebook' %}active{% endif %}">Facebook Ads</a>
</div>

<table class="table table-striped">
    <thead>
        <tr>
            {% for column in columns %}
            <th>{{ column }}</th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
        {% for item in data %}
        <tr>
            <td>{{ item.date }}</td>
            <td>{{ item.campaign_name }}</td>
            {% if current_platform == 'facebook' %}
            <td>{{ item.reach }}</td>
            <td>{{ item.impressions }}</td>
            <td>{{ item.spend }}</td>
            <td>{{ item.link_clicks }}</td>
            {% else %}
            <td>{{ item.clicks }}</td>
            <td>{{ item.impressions }}</td>
            <td>{{ item.cost }}</td>
            <td>{{ item.conversions }}</td>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}

{% block 'body' %}
    <script src="{% static 'metrics/js/metrics.js' %}"></script>
{% endblock %}